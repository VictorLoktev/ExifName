## **ExifName - automatic Photo/Video renaming according to EXIF information**<br/>

<a href="https://github.com/VictorLoktev/ExifName/releases/latest"><img src="https://img.shields.io/github/v/release/VictorLoktev/ExifName?include_prereleases"></a>
<img src="https://img.shields.io/github/last-commit/VictorLoktev/ExifName" target="_blank">
<img src="https://img.shields.io/github/downloads/VictorLoktev/ExifName/total" align="right" target="_blank">

#### Requirements
* Windows - .NET Framework [7.0](https://dotnet.microsoft.com/download?initial-os=windows)

#### Usage
```
  help                    Отображение справки о параметрах программы.
  --help                  Отображение справки о параметрах программы.

  version                 Отображение информации о версии программы.
  --version               Отображение информации о версии программы.

  --- Вариант запуска для отображения информации ---
  ExifName <i|info|information> [file of directory path]

  information, i, info    Показать информацию о файле.

  FileOrDirPath (pos. 0)  Путь к директории или файлу.

  Примеры:

  ExifName i C:\file.jpg  Отображение информации из EXIF о файле C:\file.jpg.

  ExifName info C:\Dir    Отображение информации из EXIF о всех файлах в директории C:\Dir.

  ExifName information    Отображение информации из EXIF о всех файлах в текущей директории.

  --- Вариант запуска для переименования файлов ---
  ExifName <r|ren|rename> [--min ГГГГ-ММ-ДД] [--max ГГГГ-ММ-ДД] [--priority <0-5>] [directory path]

  rename, r, ren          Переименовать файлы в директории.

  --min                   (по умолчанию - 2004-03-01) Минимальная допустимая дата в формате ГГГГ-ММ-ДД.

  --max                   (по умолчанию - завтра) Максимальная допустимая дата в формате ГГГГ-ММ-ДД.

  --priority              (по умолчанию - 0) Приоритет полей, откуда берется дата и время:
                            0 - (по умолчанию) самая ранняя дата-время из полей:
                                'Date/Time', 'Date/Time Original', 'Date/Time Digitized'
                            1 - самая поздняя дата-время из полей:
                                'Date/Time', 'Date/Time Original', 'Date/Time Digitized'
                            2 - 'Date/Time' > 'Date/Time Original' > 'Date/Time Digitized'
                            3 - 'Date/Time Digitized' > 'Date/Time Original' > 'Date/Time'
                            4 - 'Date/Time Original' > 'Date/Time' > 'Date/Time Digitized'
                            5 - 'Date/Time Original' > 'Date/Time Digitized' > 'Date/Time'
                                наибольший приоритет > наименьший приоритет
                            Минимальная и максимальная даты устанавливаются для защиты
                            на случай, если у фотоаппарата дата обнулена, затем попала в Exif.

  --template              (Default: yyyy'-'MM'-'dd'-'HHmmssf) Шаблон названия файла в части даты и времени.
                          Формат см. https://learn.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings

  FileOrDirPath (pos. 0)  Путь к директории или файлу.

  Примеры:

  ExifName rename C:\Dir  Переименование файлов в директории C:\Dir

  ExifName ren            Переименование файлов в текущей директории

  ExifName ren --min 1990-01-01
                          Переименование файлов в текущей директории, допустимы даты, начиная с 1990 года.

  Для более точного управления переименованием файлов используйте
  файл конфигурации - поместите пустой файл exifname.config
  в обрабатываемую директорию и запустите программу.
  Программа заполнит пустой файл инструкцией по настройке
  конфигурационного файла.
  Следуйте инструкции и заполняйте конфигурационный файл.
```

### Формат названий файлов после переименования

До переименования название файла определяется в следующем виде:<br/>
`<цифры|латинские буквы|скобки|пробел с последующим числом>[<минус или пробел без последующего числа><комментарий>].<расширение>`
В угловых скобках отмечены обязательные части, в прямоугольных - не обязательные.
Пробел и минус отделяют комментарий, если после проблема не стоит цифра.


Параметр `--template` управляет шаблоном названия файла после переименования.
Если шаблон не был изменен, то после переименования файл получает вид:<br/>
`<yyyy-MM-dd-HHmmssf>[<минус или пробел без последующего числа><комментарий>].<расширение>`,<br/>
где<br/>
`yyyy` - год, 4 цифры,<br/>
`MM`   - месяц, 2 цифры<br/>
`dd`   - день, 2 цифры<br/>
`HH`   - час, 2 цифры<br/>
`mm`   - минуты, 2 цифры<br/>
`ss`   - секунды, 2 цифры<br/>
`f`    - 1/10 секунды (100 миллисекунд), 1 цифра.<br/>
Если несколько фотографий попадают в интервал 1/10 секунды, то первая получает точное время,
все последующие сдвигаются на 1/10 секунды позже чтобы название было уникальным,
затем еще на 1/10 секунды и так далее.

Ознакомиться с правилами формирования шаблона можно посмотреть здесь:
https://learn.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings

Часть исходного названия файла, относящаяся к комментарию сохраняется при переименовании.

Дата и время из тега Exif попадают не только в название файла, но и устанавливаются
в качестве даты и времени создания и изменения файла.

Примеры:
```
  DCIM123.jpg
->2020-01-01-1255001.jpg

  Pic001 - пример фотографии.jpg
->2020-01-01-1255001 - пример фотографии.jpg
```

### Временные зоны

Современные телефоны и фотоаппараты в Exif вместе со временем съемки записывают
временную зону, где делалась фотография.
При наличии такой информации название Jpeg-файлов после переименования учитывает данную информацию.
Файлы с видео (.mov и .mp4) в себе подобную информацию не содержат.
Когда при обработке в одной папке находятся и фото и видео, делается предположение,
что все снималось в одной временной зоне, и, если во всех фотографиях папки только одна временная зона,
то она распространяется и на файлы с видео с соответствующим переименованием.

---
В проекте использованы следующие компоненты:

* [CommandLineParser](https://github.com/commandlineparser/commandline)

* [MetadataExtractor](https://github.com/drewnoakes/metadata-extractor-dotnet)

за что авторам компонентов отдельное большое спасибо!
